<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1020" height="516" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Browser ->> S3 Bucket: Get specific image size
S3 Bucket -->>S3 Bucket : HttpErrorCode = 404 ? 
S3 Bucket -->>Browser: Return the API Gateway URL
Browser->> API Gateway : Get resized image.
API Gateway ->> Lambda: Create resized image.
Lambda ->> S3 Bucket: Get original image.
Lambda ->> Lambda: Resize.
Lambda ->> S3 Bucket: Put resized image.
Lambda ->> API Gateway : Return the new resized URL.
API Gateway ->> Browser : Return the new resized URL.]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="87.203125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">Browser</tspan></text></g><g class="actor"><rect x="10" y="458" width="87.203125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="482.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">Browser</tspan></text></g><line x1="53.6015625" x2="53.6015625" y1="58" y2="458" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="270.0390625" y="20" width="106.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="280.0390625" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="280.0390625">S3 Bucket</tspan></text></g><g class="actor"><rect x="270.0390625" y="458" width="106.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="280.0390625" y="482.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="280.0390625">S3 Bucket</tspan></text></g><line x1="323.2421875" x2="323.2421875" y1="58" y2="458" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="502.0625" y="20" width="125.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="512.0625" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="512.0625">API Gateway</tspan></text></g><g class="actor"><rect x="502.0625" y="458" width="125.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="512.0625" y="482.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="512.0625">API Gateway</tspan></text></g><line x1="564.8671875" x2="564.8671875" y1="58" y2="458" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="805.296875" y="20" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="815.296875" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="815.296875">Lambda</tspan></text></g><g class="actor"><rect x="805.296875" y="458" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="815.296875" y="482.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="815.296875">Lambda</tspan></text></g><line x1="844.1015625" x2="844.1015625" y1="58" y2="458" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="78.0078125" y="88.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="78.0078125">Get specific image size</tspan></text><line x1="53.6015625" x2="323.2421875" y1="96" y2="96" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="348.2421875" y="130" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="348.2421875">HttpErrorCode = 404 ?</tspan></text><line x1="323.2421875" x2="343.2421875" y1="116" y2="116" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2;"></line><line x1="343.2421875" x2="343.2421875" y1="116" y2="139" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2;"></line><line x1="343.2421875" x2="323.2421875" y1="139" y2="139" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="63.6015625" y="164.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="63.6015625">Return the API Gateway URL</tspan></text><line x1="323.2421875" x2="53.6015625" y1="172" y2="172" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="222.8203125" y="202.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="222.8203125">Get resized image.</tspan></text><line x1="53.6015625" x2="564.8671875" y1="210" y2="210" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="603.671875" y="240.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="603.671875">Create resized image.</tspan></text><line x1="564.8671875" x2="844.1015625" y1="248" y2="248" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="492.4609375" y="278.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="492.4609375">Get original image.</tspan></text><line x1="844.1015625" x2="323.2421875" y1="286" y2="286" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="869.1015625" y="320" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="869.1015625">Resize.</tspan></text><line x1="844.1015625" x2="864.1015625" y1="306" y2="306" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="864.1015625" x2="864.1015625" y1="306" y2="329" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="864.1015625" x2="844.1015625" y1="329" y2="329" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="497.2578125" y="354.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="497.2578125">Put resized image.</tspan></text><line x1="844.1015625" x2="323.2421875" y1="362" y2="362" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="574.8671875" y="392.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="574.8671875">Return the new resized URL.</tspan></text><line x1="844.1015625" x2="564.8671875" y1="400" y2="400" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="179.6171875" y="430.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="179.6171875">Return the new resized URL.</tspan></text><line x1="564.8671875" x2="53.6015625" y1="438" y2="438" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g></svg>